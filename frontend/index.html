<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Strinex â€” Real-Time GPS Fitness Tracker</title>
  <meta name="description"
    content="Strinex maps your outdoor runs live on interactive maps, calculates real-time pace, maintains daily streaks, and ranks you globally." />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&family=DM+Sans:wght@300;400;500&display=swap"
    rel="stylesheet" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="vendor/leaflet/leaflet.css" />

  <!-- â”€â”€ CSS: tokens â†’ base â†’ nav â†’ modal â†’ components â†’ pages â”€â”€ -->
  <link rel="stylesheet" href="css/variables.css" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/nav.css" />
  <link rel="stylesheet" href="css/modal.css" />
  <link rel="stylesheet" href="css/components.css" />
  <link rel="stylesheet" href="css/landing.css" />
  <link rel="stylesheet" href="css/dashboard.css" />
  <link rel="stylesheet" href="css/run.css" />
  <link rel="stylesheet" href="css/leaderboard.css" />
  <link rel="stylesheet" href="css/profile.css" />

  <!-- Clerk CDN is injected dynamically by auth.js ONLY when a valid key exists -->
</head>

<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CLERK LOADING OVERLAY  (hidden once Clerk is ready)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="clerk-loading">
    <div class="spinner"></div>
    <p>Loading Strinexâ€¦</p>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <nav>
    <div class="logo">STRIN<span>X</span></div>

    <div class="nav-links">
      <button class="nav-btn active" id="nav-home" onclick="showPage('landing')">Home</button>
      <button class="nav-btn protected-link" style="display:none;" onclick="showPage('dashboard')">Dashboard</button>
      <button class="nav-btn protected-link" style="display:none;" onclick="showPage('run')">Live Run</button>
      <button class="nav-btn protected-link" style="display:none;"
        onclick="showPage('leaderboard')">Leaderboard</button>
      <button class="nav-btn protected-link" style="display:none;" onclick="showPage('profile')">Profile</button>
    </div>

    <!-- Clerk user pill â€” updates dynamically when signed in/out -->
    <div id="clerk-user-btn" style="display:none;"></div>

    <div class="clerk-pill signed-out" id="nav-pill" onclick="openAuth('login')">
      <div class="avatar" id="nav-avatar">?</div>
      <div class="clerk-name" id="nav-username">Sign In</div>
    </div>
  </nav>


  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE â€” LANDING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page active" id="page-landing">
    <div class="landing-hero">
      <div class="hero-tag">
        <div class="dot-blink"></div>Real-Time GPS Tracking
      </div>
      <h1 class="hero-title">Track Every Stride.<br><span class="red">Own Every Run.</span></h1>
      <p class="hero-sub">
        Strinex maps your outdoor runs live on interactive maps, calculates real-time
        pace, maintains daily streaks, and ranks you globally.
      </p>
      <div class="cta-group">
        <button class="btn-primary" onclick="openAuth('signup')">Get Started</button>
      </div>
    </div>
    <div class="features-grid">
      <div class="feat-card">
        <div class="feat-icon">ğŸ—ºï¸</div>
        <div class="feat-title">Live Map Tracking</div>
        <div class="feat-desc">Red polyline route drawn in real time on Leaflet.js maps with OpenStreetMap tiles.</div>
      </div>
      <div class="feat-card">
        <div class="feat-icon">ğŸ“</div>
        <div class="feat-title">Browser GPS</div>
        <div class="feat-desc">Native Geolocation API streams your real coordinates â€” no app install needed.</div>
      </div>
      <div class="feat-card">
        <div class="feat-icon">âš¡</div>
        <div class="feat-title">Instant Metrics</div>
        <div class="feat-desc">Distance, pace, speed and duration updated live every GPS fix.</div>
      </div>
      <div class="feat-card">
        <div class="feat-icon">ğŸ”¥</div>
        <div class="feat-title">Streak Engine</div>
        <div class="feat-desc">Goal-based daily streaks to keep you consistent week over week.</div>
      </div>
      <div class="feat-card">
        <div class="feat-icon">ğŸ†</div>
        <div class="feat-title">Leaderboard</div>
        <div class="feat-desc">Weekly distance rankings. Earn streak badges and climb globally.</div>
      </div>
      <div class="feat-card">
        <div class="feat-icon">ğŸ”</div>
        <div class="feat-title">Clerk Auth</div>
        <div class="feat-desc">JWT-verified sessions â€” email, Google, or GitHub sign-in. Zero password storage.</div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE â€” DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-dashboard">
    <div style="padding:32px 28px">
      <div class="page-title">Dashboard</div>
      <div class="page-sub" id="dash-sub">Welcome back Â· Strinex</div>

      <button class="start-run-btn" onclick="showPage('run')">â¬¤&nbsp; START A RUN</button>

      <div class="stats-grid">
        <div class="stat-card highlight">
          <div class="s-label">This Week</div>
          <div class="s-value">24.6<span class="s-unit">km</span></div>
          <div class="s-delta">â†‘ +3.2km from last week</div>
        </div>
        <div class="stat-card">
          <div class="s-label">Current Streak</div>
          <div class="s-value">ğŸ”¥ 7<span class="s-unit">days</span></div>
          <div class="s-delta" style="color:var(--amber)">Goal: 10 km/day</div>
        </div>
        <div class="stat-card">
          <div class="s-label">Avg Pace</div>
          <div class="s-value">5:42<span class="s-unit">/km</span></div>
          <div class="s-delta">â†“ âˆ’0:18 improvement</div>
        </div>
        <div class="stat-card">
          <div class="s-label">Total Runs</div>
          <div class="s-value">84</div>
          <div class="s-delta" style="color:var(--muted)">Since Jan 2025</div>
        </div>
      </div>

      <div class="dash-row">
        <div class="card">
          <div class="card-title">Weekly Distance <span>km per day</span></div>
          <div class="week-bars">
            <div class="bar-wrap">
              <div class="bar" style="height:38%"></div>
              <div class="bar-day">MON</div>
            </div>
            <div class="bar-wrap">
              <div class="bar" style="height:65%"></div>
              <div class="bar-day">TUE</div>
            </div>
            <div class="bar-wrap">
              <div class="bar" style="height:52%"></div>
              <div class="bar-day">WED</div>
            </div>
            <div class="bar-wrap">
              <div class="bar" style="height:80%"></div>
              <div class="bar-day">THU</div>
            </div>
            <div class="bar-wrap">
              <div class="bar today" style="height:45%"></div>
              <div class="bar-day">FRI</div>
            </div>
            <div class="bar-wrap">
              <div class="bar" style="height:5%"></div>
              <div class="bar-day">SAT</div>
            </div>
            <div class="bar-wrap">
              <div class="bar" style="height:5%"></div>
              <div class="bar-day">SUN</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-title">Recent Runs</div>
          <ul class="run-list">
            <li class="run-item">
              <div>
                <div class="ri-dist">8.4 km</div>
                <div class="ri-date">Today Â· 47:22</div>
              </div>
              <div class="run-pace">5:38/km</div>
            </li>
            <li class="run-item">
              <div>
                <div class="ri-dist">5.1 km</div>
                <div class="ri-date">Yesterday Â· 29:44</div>
              </div>
              <div class="run-pace">5:50/km</div>
            </li>
            <li class="run-item">
              <div>
                <div class="ri-dist">10.0 km</div>
                <div class="ri-date">2 days ago Â· 56:10</div>
              </div>
              <div class="run-pace">5:37/km</div>
            </li>
            <li class="run-item">
              <div>
                <div class="ri-dist">6.8 km</div>
                <div class="ri-date">3 days ago Â· 39:02</div>
              </div>
              <div class="run-pace">5:44/km</div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE â€” LIVE RUN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-run">
    <div class="run-panel">
      <div>
        <div class="page-title" style="font-size:1.05rem;margin-bottom:6px">Live Run</div>
        <div class="gps-status">
          <div class="gps-dot" id="gps-dot"></div>
          <span id="gps-label">GPS idle â€” press Start</span>
        </div>
      </div>

      <div class="run-stat-big">
        <div class="rsb-label">Distance</div>
        <div class="rsb-val red" id="live-dist">0.00 <span style="font-size:1rem;color:var(--muted)">km</span></div>
      </div>

      <div class="run-mini-grid">
        <div class="run-mini">
          <div class="rml">Duration</div>
          <div class="rmv" id="live-time">00:00</div>
        </div>
        <div class="run-mini">
          <div class="rml">Pace</div>
          <div class="rmv" id="live-pace">--:--</div>
        </div>
        <div class="run-mini">
          <div class="rml">Speed</div>
          <div class="rmv" id="live-speed">0.0 <span style="font-size:0.65rem;color:var(--muted)">km/h</span></div>
        </div>
        <div class="run-mini">
          <div class="rml">Points</div>
          <div class="rmv" id="live-pts">0</div>
        </div>
      </div>

      <!-- GPS error/prompt message (updated dynamically by run.js) -->
      <div class="gps-prompt" id="gps-note">
        ğŸ“ Click <b>START RUN</b> â€” your browser will ask for location permission.
        Allow it to enable real GPS tracking.
      </div>

      <button class="run-ctrl-btn start" id="run-btn" onclick="toggleRun()">START RUN</button>
      <div class="coord-count" id="coord-count">Route: 0 GPS points logged</div>
    </div>

    <div id="map"></div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE â€” LEADERBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-leaderboard">
    <div style="padding:32px 28px">
      <div class="page-title">Leaderboard</div>
      <div class="page-sub">Weekly rankings Â· Resets every Monday Â· Verified via Clerk JWT</div>
      <div class="lb-tabs">
        <button class="lb-tab active"
          onclick="this.closest('.lb-tabs').querySelectorAll('.lb-tab').forEach(t=>t.classList.remove('active'));this.classList.add('active')">ğŸŒ
          Global</button>
        <button class="lb-tab"
          onclick="this.closest('.lb-tabs').querySelectorAll('.lb-tab').forEach(t=>t.classList.remove('active'));this.classList.add('active')">ğŸ™ï¸
          City</button>
        <button class="lb-tab"
          onclick="this.closest('.lb-tabs').querySelectorAll('.lb-tab').forEach(t=>t.classList.remove('active'));this.classList.add('active')">ğŸ‘¥
          Friends</button>
      </div>
      <div class="card" style="padding:0">
        <table class="lb-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Runner</th>
              <th>Distance</th>
              <th>Streak</th>
              <th>Pace</th>
            </tr>
          </thead>
          <tbody id="lb-body"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE â€” PROFILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="page" id="page-profile">
    <div style="padding:32px 28px">
      <div class="page-title">Profile</div>
      <div class="page-sub">Your Strinex fitness journey</div>

      <div class="profile-header">
        <div class="profile-avatar" id="profile-avatar-text">?</div>
        <div class="profile-info">
          <h2 id="profile-name">â€”</h2>
          <div class="handle" id="profile-handle">Sign in to view your profile</div>
          <div class="clerk-verified" id="profile-clerk-id">âœ“ Powered by Clerk</div>
        </div>
      </div>

      <div class="level-bar-wrap">
        <div class="level-row">
          <div>
            <div class="level-label">Level</div>
            <div class="level-val">LVL 12 â€” Road Warrior</div>
          </div>
          <div style="text-align:right">
            <div class="level-label">XP</div>
            <div style="font-family:'DM Mono',monospace;font-size:0.82rem">2,340 / 3,000 XP</div>
          </div>
        </div>
        <div class="xp-bar">
          <div class="xp-fill"></div>
        </div>
      </div>

      <div class="stats-grid" style="margin-bottom:24px">
        <div class="stat-card highlight">
          <div class="s-label">Total Distance</div>
          <div class="s-value">312<span class="s-unit">km</span></div>
        </div>
        <div class="stat-card">
          <div class="s-label">Total Runs</div>
          <div class="s-value">84</div>
        </div>
        <div class="stat-card">
          <div class="s-label">Best Streak</div>
          <div class="s-value">ğŸ”¥ 21<span class="s-unit">days</span></div>
        </div>
        <div class="stat-card">
          <div class="s-label">Best Pace</div>
          <div class="s-value">4:52<span class="s-unit">/km</span></div>
        </div>
      </div>

      <div class="card-title" style="margin-bottom:14px">Achievements</div>
      <div class="badges-grid">
        <div class="achievement">
          <div class="ach-icon">ğŸ¥‡</div>
          <div>
            <div class="ach-name">First Run</div>
            <div class="ach-sub">Completed first tracked run</div>
          </div>
        </div>
        <div class="achievement">
          <div class="ach-icon">ğŸ”Ÿ</div>
          <div>
            <div class="ach-name">10K Club</div>
            <div class="ach-sub">First 10km in one session</div>
          </div>
        </div>
        <div class="achievement">
          <div class="ach-icon">ğŸ”¥</div>
          <div>
            <div class="ach-name">Week Warrior</div>
            <div class="ach-sub">7-day streak maintained</div>
          </div>
        </div>
        <div class="achievement">
          <div class="ach-icon">ğŸƒ</div>
          <div>
            <div class="ach-name">Century</div>
            <div class="ach-sub">100km total distance</div>
          </div>
        </div>
        <div class="achievement locked">
          <div class="ach-icon">ğŸ¦…</div>
          <div>
            <div class="ach-name">Speed Demon</div>
            <div class="ach-sub">Sub 4:30/km pace</div>
          </div>
        </div>
        <div class="achievement locked">
          <div class="ach-icon">ğŸŒ</div>
          <div>
            <div class="ach-name">Globe Trotter</div>
            <div class="ach-sub">500km total distance</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- toast container -->
  <div id="toast-container"></div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS
     Load order:
       1. config.js        â€” sets STRINEX_CONFIG.CLERK_PUBLISHABLE_KEY
       2. utils.js         â€” pure helpers (no DOM deps)
       3. router.js        â€” showPage(), isSignedIn()
       4. auth.js          â€” Clerk SDK init, openAuth(), signOut()
       5. leaderboard.js   â€” lbData, renderLeaderboard()
       6. run.js           â€” Leaflet + real geolocation
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="config.js?v=2"></script>
  <script src="js/utils.js" defer></script>
  <script src="js/router.js" defer></script>
  <script src="js/auth.js?v=2" defer></script>
  <script src="js/leaderboard.js" defer></script>
  <script src="js/run.js" defer></script>

  <script>
    /**
     * Wire Clerk SDK after all scripts and the CDN async script have loaded.
     * The CDN script sets data-clerk-publishable-key, so we patch it from config.js
     * before Clerk reads it.
     */
    window.addEventListener('load', () => {
      const key = (window.STRINEX_CONFIG || {}).CLERK_PUBLISHABLE_KEY || '';
      const cdnScript = document.getElementById('clerk-cdn');
      if (cdnScript && key && !key.includes('PASTE_YOUR_KEY')) {
        cdnScript.setAttribute('data-clerk-publishable-key', key);
      }
      // initClerk is defined in auth.js (loaded via defer above)
      if (typeof initClerk === 'function') initClerk();
      else {
        // If defer scripts haven't run yet, wait a tick
        setTimeout(() => { if (typeof initClerk === 'function') initClerk(); }, 200);
      }
    });
  </script>

  <script src="vendor/leaflet/leaflet.js"></script>
</body>

</html>